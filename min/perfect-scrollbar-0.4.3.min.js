/*! perfect-scrollbar - v0.4.3
* http://noraesae.github.com/perfect-scrollbar/
* Copyright (c) 2013 HyeonJe Jun; Licensed MIT */
(function(e){var t={wheelSpeed:10,wheelPropagation:false,minScrollbarLength:null};e.fn.perfectScrollbar=function(n,r){return this.each(function(){var i=e.extend(true,{},t),s=e(this);if(typeof n==="object"){e.extend(true,i,n)}else{r=n}if(r==="update"){if(s.data("perfect-scrollbar-update")){s.data("perfect-scrollbar-update")()}return s}else if(r==="destroy"){if(s.data("perfect-scrollbar-destroy")){s.data("perfect-scrollbar-destroy")()}return s}if(s.data("perfect-scrollbar")){return s.data("perfect-scrollbar")}s.addClass("ps-container");var o=e("<div class='ps-scrollbar-x'></div>").appendTo(s),u=e("<div class='ps-scrollbar-y'></div>").appendTo(s),a,f,l,c,h,p,d=parseInt(o.css("bottom"),10),v,m,g=parseInt(u.css("right"),10);var y=function(){var e=parseInt(m*(c-f)/(f-v),10);s.scrollTop(e);o.css({bottom:d-e})};var b=function(){var e=parseInt(p*(l-a)/(a-h),10);s.scrollLeft(e);u.css({right:g-e})};var w=function(e){if(i.minScrollbarLength){e=Math.max(e,i.minScrollbarLength)}return e};var E=function(){o.css({left:p+s.scrollLeft(),bottom:d-s.scrollTop(),width:h});u.css({top:m+s.scrollTop(),right:g-s.scrollLeft(),height:v})};var S=function(){a=s.width();f=s.height();l=s.prop("scrollWidth");c=s.prop("scrollHeight");if(a<l){h=w(parseInt(a*a/l,10));p=parseInt(s.scrollLeft()*(a-h)/(l-a),10)}else{h=0;p=0;s.scrollLeft(0)}if(f<c){v=w(parseInt(f*f/c,10));m=parseInt(s.scrollTop()*(f-v)/(c-f),10)}else{v=0;m=0;s.scrollTop(0)}if(m>=f-v){m=f-v}if(p>=a-h){p=a-h}E()};var x=function(e,t){var n=e+t,r=a-h;if(n<0){p=0}else if(n>r){p=r}else{p=n}o.css({left:p+s.scrollLeft()})};var T=function(e,t){var n=e+t,r=f-v;if(n<0){m=0}else if(n>r){m=r}else{m=n}u.css({top:m+s.scrollTop()})};var N=function(){var t,n;o.bind("mousedown.perfect-scroll",function(e){n=e.pageX;t=o.position().left;o.addClass("in-scrolling");e.stopPropagation();e.preventDefault()});e(document).bind("mousemove.perfect-scroll",function(e){if(o.hasClass("in-scrolling")){b();x(t,e.pageX-n);e.stopPropagation();e.preventDefault()}});e(document).bind("mouseup.perfect-scroll",function(e){if(o.hasClass("in-scrolling")){o.removeClass("in-scrolling")}});t=n=null};var C=function(){var t,n;u.bind("mousedown.perfect-scroll",function(e){n=e.pageY;t=u.position().top;u.addClass("in-scrolling");e.stopPropagation();e.preventDefault()});e(document).bind("mousemove.perfect-scroll",function(e){if(u.hasClass("in-scrolling")){y();T(t,e.pageY-n);e.stopPropagation();e.preventDefault()}});e(document).bind("mouseup.perfect-scroll",function(e){if(u.hasClass("in-scrolling")){u.removeClass("in-scrolling")}});t=n=null};var k=function(){var e=function(e,t){var n=s.scrollTop();if(n===0&&t>0&&e===0){return!i.wheelPropagation}else if(n>=c-f&&t<0&&e===0){return!i.wheelPropagation}var r=s.scrollLeft();if(r===0&&e<0&&t===0){return!i.wheelPropagation}else if(r>=l-a&&e>0&&t===0){return!i.wheelPropagation}return true};s.bind("mousewheel.perfect-scroll",function(t,n,r,o){s.scrollTop(s.scrollTop()-o*i.wheelSpeed);s.scrollLeft(s.scrollLeft()+r*i.wheelSpeed);S();if(e(r,o)){t.preventDefault()}});s.bind("DOMMouseScroll.perfect-scroll",function(e){e.preventDefault()});s.bind("MozMousePixelScroll.perfect-scroll",function(e){e.preventDefault()})};var L=function(){var t=function(e,t){s.scrollTop(s.scrollTop()-t);s.scrollLeft(s.scrollLeft()-e);S()};var n={},r=0,i={},o=null,u=false;e(window).bind("touchstart.perfect-scroll",function(e){u=true});e(window).bind("touchend.perfect-scroll",function(e){u=false});s.bind("touchstart.perfect-scroll",function(e){var t=e.originalEvent.targetTouches[0];n.pageX=t.pageX;n.pageY=t.pageY;r=(new Date).getTime();if(o!==null){clearInterval(o)}e.stopPropagation()});s.bind("touchmove.perfect-scroll",function(e){if(!u&&e.originalEvent.targetTouches.length===1){var s=e.originalEvent.targetTouches[0];var o={};o.pageX=s.pageX;o.pageY=s.pageY;var a=o.pageX-n.pageX,f=o.pageY-n.pageY;t(a,f);n=o;var l=(new Date).getTime();i.x=a/(l-r);i.y=f/(l-r);r=l;e.preventDefault()}});s.bind("touchend.perfect-scroll",function(e){clearInterval(o);o=setInterval(function(){if(Math.abs(i.x)<.01&&Math.abs(i.y)<.01){clearInterval(o);return}t(i.x*30,i.y*30);i.x*=.8;i.y*=.8},10)})};var A=function(){s.unbind(".perfect-scroll");e(window).unbind(".perfect-scroll");s.data("perfect-scrollbar",null);s.data("perfect-scrollbar-update",null);s.data("perfect-scrollbar-destroy",null);o.remove();u.remove();o=u=a=f=l=c=h=p=d=v=m=g=null};var O=function(t){s.addClass("ie").addClass("ie"+t);var n=function(){var t=function(t){e(this).addClass("hover")};var n=function(){e(this).removeClass("hover")};s.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",n);o.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",n);u.bind("mouseenter.perfect-scroll",t).bind("mouseleave.perfect-scroll",n)};var r=function(){E=function(){o.css({left:p+s.scrollLeft(),bottom:d,width:h});u.css({top:m+s.scrollTop(),right:g,height:v});o.hide().show();u.hide().show()};y=function(){var e=parseInt(m*c/f,10);s.scrollTop(e);o.css({bottom:d});o.hide().show()};b=function(){var e=parseInt(p*l/a,10);s.scrollLeft(e);u.hide().show()}};if(t===6){n();r()}};var M="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;var _=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);if(e&&e[1]==="msie"){O(parseInt(e[2],10))}S();N();C();if(M){L()}if(s.mousewheel){k()}s.data("perfect-scrollbar",s);s.data("perfect-scrollbar-update",S);s.data("perfect-scrollbar-destroy",A)};_();return s})}})(jQuery)